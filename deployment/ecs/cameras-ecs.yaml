# ============================================================================
# kvs-infer Configuration for ECS Deployment
# ============================================================================

# AWS Configuration
aws:
  region: ap-southeast-1

# Global Publishers
publishers:
  kds_stream: kvs-detection-events
  s3_bucket: kvs-inference-snapshots-065693560492
  ddb_table: kvs-inference-metadata

# Service Configuration
service:
  hls_session_seconds: 300
  reconnect_delay_seconds: 5

# Global Snapshots Configuration
snapshots:
  enabled: true
  jpeg_quality: 90
  image_format: jpg

# Device Configuration (GPU enabled)
device: cuda:0

# Metrics Configuration
metrics_enabled: true
metrics_port: 9090
metrics_host: "0.0.0.0"

# Logging Configuration
log_level: INFO
log_format: json

# ============================================================================
# Camera Configurations
# ============================================================================

cameras:
  # Stream C01 - Gun Detection
  - id: stream-C01
    kvs_stream_name: stream-C01
    enabled: true
    
    playback:
      mode: HLS
      retention_required: false
    
    fps_target: 2
    
    pipeline:
      - type: roboflow_gun
        enabled: true
        roboflow_gun:
          model_id: "cctv-gun-detection/2"
          conf_threshold: 0.5
          iou_threshold: 0.5
    
    publishers:
      kds_stream: kvs-detection-events
      s3_bucket: kvs-inference-snapshots-065693560492
      s3_prefix: "stream-C01/"

  # Stream C02 - Gun Detection
  - id: stream-C02
    kvs_stream_name: stream-C02
    enabled: true
    
    playback:
      mode: HLS
      retention_required: false
    
    fps_target: 2
    
    pipeline:
      - type: roboflow_gun
        enabled: true
        roboflow_gun:
          model_id: "cctv-gun-detection/2"
          conf_threshold: 0.5
          iou_threshold: 0.5
    
    publishers:
      kds_stream: kvs-detection-events
      s3_bucket: kvs-inference-snapshots-065693560492
      s3_prefix: "stream-C02/"

  # Stream C03 - Gun Detection
  - id: stream-C03
    kvs_stream_name: stream-C03
    enabled: true
    
    playback:
      mode: HLS
      retention_required: false
    
    fps_target: 2
    
    pipeline:
      - type: roboflow_gun
        enabled: true
        roboflow_gun:
          model_id: "cctv-gun-detection/2"
          conf_threshold: 0.5
          iou_threshold: 0.5
    
    publishers:
      kds_stream: kvs-detection-events
      s3_bucket: kvs-inference-snapshots-065693560492
      s3_prefix: "stream-C03/"
